<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <title>Kiwix</title>
        <link rel="icon" href="img/icons/kiwix-32.png" sizes="32x32" />
        <meta name="description" content="Offline Wikipedia reader">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--
        Kiwix (offline Wikipedia reader) - HTML5/Javascript version
        Home page : http://www.kiwix.org

        Main authors of this application :
        Mossroy - mossroy@mossroy.fr
        Peter-x - https://github.com/peter-x

        Copyright 2013-2017 Mossroy, Peter-x and contributors
        License GPL v3:

        This file is part of Kiwix.

        Kiwix is free software: you can redistribute it and/or modify
        it under the terms of the GNU General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        Kiwix is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        GNU General Public License for more details.

        You should have received a copy of the GNU General Public License
        along with Kiwix (file LICENSE-GPLv3.txt).  If not, see <http://www.gnu.org/licenses/>

        -->

        <!--<link rel="stylesheet" href="css/app.css"/>-->
        <!-- Bootstrap -->
        <link href="css/bootstrap.css" rel="stylesheet" media="screen"/>
        <link href="css/bootstrap-theme.css" rel="stylesheet" media="screen"/>
    </head>
    <body role="application">
        <section id="search-article" role="region">
            <header id="top">
                <nav role="navigation">
                    <!-- Issue here is for some small screens search bar can get small. Can be handled by shrinking buttons collapse. Refer git history for sample code.
                    Use "container" in div to center the toolbar if reqd --> 
                    <div class="">
                        <form id="filters"></form>
                        <form id="formArticleSearchnew">
                            <span class="input-group">
                                <span class="input-group-btn">
                                    <button id="btnHome" type="button" class="btn btn-default">
                                    <img src="./img/icons/kiwix-19.png"/>
                                    </button>
                                <button id="filterDropDown" type="button" style="margin-top=-1px;" class="btn btn-default btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-filter small"></span> <span class="caret small"></span></button>
                                <ul class="dropdown-menu">
                                  <li class="disabled small"><a href="#">Use URL Index</a></li>
                                  <li class="active small"><a href="#">Use Title Index</a></li>
                                  <li class="disabled small"><a href="#">Use Title Index<small>(Brute Force)</small></a></li>
                                  <li role="separator" class="divider"></li>
                                  <!-- values of the "match" group below should be the same as values in dirEntryFinder.js matcherTable until better impl in place. Anything added there should be added here-->
                                  <li class="small"><input value="PrefixAndArticleMatch" type="radio" form="filters" name="match" checked>PrefixMatch</input></li>
                                  <li class="small"><input value="SubstringMatch" type="radio" form="filters" name="match"></input>SubstringMatch</li>
                                  <li class="small"><input value="All" type="radio" name="match" form="filters">Return All</input></li>
                                  <li class="small"><input value="NoMatch" type="radio" form="filters" name="match">Return None - Perf Test</input></li>
                                  <li class="small"><input type="checkbox" id="caseSensitive" form="filters" style="color:blue;" >Case Sensitive - No Variants</a></li>
                                  <li class="small"><a style="color:blue;" href="#">Resolve Redirects</a></li>
                                  <li class="small"><a href="#">Remove Dups</a></li>
                                  <!--<li role="seperator" class="divider"></li>-->
                                  <li class="input-group">
                                        <span class="input-group-addon primary" style="padding:2px 20px;font-size:12px;border-radius:4px 4px 0px 0px;text-align:left;" form="filters" id="fromindex-addon">Start From</span>
                                        <input type="text" class="form-control" style="width:100%;border:1px solid #ccc;border-radius:0px 0px 0px 0px;" id="from" form="filters" aria-describedby="fromindex-addon"></input>
                                  </li>
                                  <li class="input-group xs">
                                        <span class="input-group-addon" style="padding:2px 20px;font-size:12px;text-align:left;border-radius:0px 0px 0px 0px;" id="traverse-addon">Traverse Upto</span>
                                        <input type="text" class="form-control" style="border-radius:0px 0px 4px 4px;" id="upto" form="filters" aria-describedby="traverse-addon"></input>
                                  </li>
                                  <input type="submit" form="filters" style="display:none;" />
                                </ul>    
                                </span>
                                <input type="search" id="prefix" placeholder="Search..." 
                                class="form-control" />
                                <span class="input-group-btn">
                                    <a class="btn btn-primary btn-default" title="Article Search" id="searchArticles"><span class="glyphicon glyphicon-search"></span></a>
                                    <a class="btn btn-default" title="Image Search" id="searchImages"><span class="glyphicon glyphicon-camera"></span></a>
                                    <a class="btn btn-default" title="Random Article" id="btnRandomArticle"><span class="glyphicon glyphicon-random"></span></a>
                                    <a class="btn btn-default" title="Settings" id="btnConfigure"><span class="glyphicon glyphicon-wrench"></span></a>
                                    <a class="btn btn-default" title="About" id="btnAbout"><span class="glyphicon glyphicon-info-sign"></span></a>
                                </span>
                            </span>                                
                        </form>
                    </div>
                </nav>
            </header>
            <article class="view-content">
                <div id="formArticleSearchResults" class="container">
                    <div class="row">                       
                        <!-- List of articles matching the typed prefix -->
                        <div id="articleListWithHeader">
                            <div id="articleList" class="list-group">
                            </div>
                        </div>     
                    </div>
                    <!-- <div id="searchingForArticles" class="floating" style="display: none;">
                        <img src="img/spinner.gif" alt="Please wait..." />
                    </div> -->
                </div>

                <div id="about" style="display: none;" class="container">
                    <p class="lead"><img src="img/icons/kiwix-60.png" alt="Kiwix icon"/>
                    Kiwix : Offline Web Archive Reader <small>(Version:2.2-WIP)</small>
                     </p>
                    <p>Official Site : <a href="http://www.kiwix.org/" target="_blank">www.kiwix.org</a></p> 
                    <h2 id="Usage">Usage</h2>
                    <dl>
                    <dt>Step 1 : Download a Web Archive</dt>
                    <dd> Offline Web Archives in the open <a hred="openzim.org">ZIM format</a> can be downloaded at the <a href="http://download.kiwix.org" target="_blank">Kiwix</a> website.
                    </dd>
                    <p class="small">Check the size as many of the files are large (several GB). Large files can be split into smaller files. To load split files see <a href="http://www.kiwix.org/wiki/FAQ">the Kiwix FAQ</a>
                    </p>
                    <dt>Step 2 : Load Archive</dt><dd> Goto the Config menu <span class="glyphicon glyphicon-wrench"> and select your ZIM file</dd>
                    <dt>Step 3 :<dt> <dd>Enjoy browsing your offline web archive!</dd></dl>
                    
                    <h2 id="Quick_Test">Quick Test</h2> 
                    <p>To load a Random Article from the "Ray Charles" Archive that comes with the app - it contains some wikipedia articles about Ray Charles. <a href="./index.html?archive=test&random=" target="_blank">TEST ARCHIVE</a> 
                    </p>
                    <ul> Once loaded you could -   
                        <li>Hit <span class="glyphicon glyphicon-home"></span> for the main page of the archive. 
                        </li>
                        <li>Hit <span class="glyphicon glyphicon-random"></span> to get another Random Article
                        </li>
                        <li>You can also try searching by typing a phrase/keyword in the search bar pressing <kbd>ENTER</kbd> or hitting <span class="glyphicon glyphicon-search"></span> or <span class="glyphicon glyphicon-camera"></span> for imageSearch
                        </li>
                        <li> <strong>Pro Tip:</strong> To scroll through the entire archive's index, open the filter drop down by pressing <span class="glyphicon glyphicon-filter small"></span>. Select "Return All". Now hit <span class="glyphicon glyphicon-search"></span>. It will load the first 10 entires in the index. The <kbd class="success">LoadMore</kbd> will allow you to load the next 10. 
                        </li>
                    </ul>
                    
                    <h2 id="Notes">Notes</h2>
                    This branch is based on the <a href="https://github.com/kiwix/kiwix-js/" target="_blank">Kiwix-JS</a> Project. Code is available <a href="https://github.com/sharun-s/kiwix-html5/" target="_blank">here</a>. 
                    The javascript code has many pieces that allow it to be used in 5 different "modes" detailed below. Find the right repo on the KIWIX github page to suite your needs. This version is focused on <strong>Standalone</strong> mode.

                    <p class="small">
                    <ul>
                    <li><strong>Standalone</strong> - distribute zims and code folder on a usb key/sdcard with instructions to click the index.html file to run. It requires least instructions to anyone with low computer literacy i.e. most people who are offline.
                    </li><li>Local server based
                        which would make duplications of massive zims across many clients unnecessary for local classroom type scenarios
                    </li><li>WebExtension - kiwix-js
                    </li><li>WebApp (phone gap/corova based) on app store
                    </li><li>NativeApp eg the Firefox OS app</li></ul>
                    </p>
                    <h2 id="URLs">URLs</h2>
                    <p>
                        Direct access to content via URLs is possible. This can be a bit slower than when loading content via the FileSelector. Being able to access content via URL allows making use of inbuilt browser capabilities like bookmarking pages, setting home pages, load archive on click, simpler testing etc.
                        <dl>
                            <dt>Show Article</dt>
                            <dd><small>file://c:/kiwix/index.html</small>?archive=wiki&<strong>title</strong>=<mark>Paris.html</mark></dd>
                            <dt>Random Article</dt>
                            <dd><small>file://[path to kiwix directory]/index.html</small>?archive=wiki&<strong>random=</strong></dd>
                            <dt>Search by Title</dt>
                            <dd><small>file://[path to kiwix directory]/index.html</small>?archive=wiki&<strong>titleSearch</strong>=<mark>Paris</mark><br/>
                            <small>file://[path to kiwix directory]/index.html</small>?archive=wiki&<strong>titleSearch</strong>=<mark>Paris</mark>&<strong>upto</strong>=<mark>50</mark>
                            <br/>
                            <small>Empty string will return everything in the TitleIndex</small><br/>  
                            <small>file://[path to kiwix directory]/index.html</small>?archive=wiki&<strong>titleSearch</strong>=&<strong>from</strong>=<mark>0</mark>&<strong>upto</strong>=<mark>100</mark>&<strong>match</strong>=<mark>All</mark>
                            </dd>
                            <dt>ImageSearch by Title</dt>
                            <dd><small>file://[path to kiwix directory]/index.html</small>?archive=wiki&<strong>imageSearch</strong>=<mark>Vincent Van Gogh<mark></dd>
                            <dt>Archive Stats</dt>
                            <dd><small>file://[path to kiwix directory]/index.html</small>?archive=wiki</dd>
                            <small><strong>NOTE:</strong> "archive" can be set to shortcuts such as wiki, quotes, dict etc or the actual file names such as wiki_en_all_12_16-1.zim, wikiquotes_en_all.zim etc. To add a shortcut create a new entry in knownArchives table in zimArchiveLoader.js following the instructions there. </small>
                        </dl>
                    </p>
                    <h2 id="License">License</h2>
                    <p>This application is licensed under the GPL v3 license :
                    <br />
                    <i>
                    <br />Kiwix is free software: you can redistribute it and/or modify
                    <br />it under the terms of the GNU General Public License as published by
                    <br />the Free Software Foundation, either version 3 of the License, or
                    <br />(at your option) any later version.
                    <br />
                    <br />Kiwix is distributed in the hope that it will be useful,
                    <br />but WITHOUT ANY WARRANTY; without even the implied warranty of
                    <br />MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                    <br />GNU General Public License for more details.
                    <br />
                    <br />You should have received a copy of the GNU General Public License
                    <br />along with Kiwix (file LICENSE-GPLv3.txt).  If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>
                    </i>
                    </p>
                    <h2 id="Resources">Main libraries and resources used :</h2>
                    <ul>
                        <li><a href="http://jquery.com/" target="_blank">jQuery</a> 2, released under the <a href="http://jquery.org/license" target="_blank">MIT license</a></li>
                        <li><a href="http://getbootstrap.com/" target="_blank">Bootstrap</a> 3, released under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache license 2.0</a>, which includes icons from <a href="http://glyphicons.com/">Glyphicons</a></li>
                        <li><a href="http://www.requirejs.org/" target="_blank">RequireJS</a> 2, released under the <a href="https://github.com/jrburke/requirejs/blob/master/LICENSE" target="_blank">MIT license or new BSD license</a></li>
                        <li><a href="http://qunitjs.com/" target="_blank">QUnit</a> 2, released under the <a href="http://jquery.org/license" target="_blank">MIT license</a></li>
                        <li>Kiwix logo from <a href="http://www.kiwix.org/" target="_blank">kiwix.org</a>, released under the <a href="http://creativecommons.org/licenses/by-sa/3.0/" target="_blank">Creative Commons Attribution Share Alike</a></li>
                        <li>OpenZIM specifications from <a href="http://www.openzim.org//wiki/OpenZIM" target="_blank">www.openzim.org</a>, released under the <a href="http://creativecommons.org/licenses/by-sa/3.0/" target="_blank">Creative Commons Attribution Share Alike</a></li>
                        <li>Emscripten to generate a XZ decompressor in javascript : <a href="https://github.com/kripken/emscripten" target="_blank">https://github.com/kripken/emscripten</a>, released under the <a href="https://github.com/kripken/emscripten" target="_blank">MIT license</a></li>
                        <li><a href="http://tukaani.org/xz/embedded.html">XZ Embedded</a> (the XZ library converted to Javascript with Emscripten), in public domain</li>
                    </ul>
                    <h2 id="Platforms">Platforms</h2>
                    FirefoxOS - Web Extensions - Android - iOS - Windows - available <a href="http://github.com/kiwix" target="_blank">here</a> or at <a href="http://www.kiwix.org" target="_blank">kiwix.org</a> 
                </div>

                <div id="configuration" style="display: none;" class="container">
                    <h4>File Selector</h4>
                    <div id="openLocalFiles" style="display: none;" >
                        <p>Please select the archive (.zim file) to load, or multi-select .zimaa, .zimab etc if loading a split archive. <small>(Or visit <a target="_blank" href="http://wiki.kiwix.org/wiki/Content#Download"><mark>Kiwix.org</mark></a> to download an archive)</small></p>
                        <p><input type="file" id="archiveFiles" multiple class="btn" accept=".zim,.dat,.idx,.txt,.zimaa,.zimab,.zimac,.zimad,.zimae,.zimaf,.zimag,.zimah,.zimai,.zimaj,.zimak,.zimal,.zimam,.ziman,.zimao,.zimap,.zimaq,.zimar,.zimas,.zimat,.zimau,.zimav,.zimaw,.zimax,.zimay,.zimaz,.zimba,.zimbb,.zimbc,.zimbd,.zimbe,.zimbf,.zimbg,.zimbh,.zimbi,.zimbj,.zimbk,.zimbl,.zimbm,.zimbn,.zimbo,.zimbp,.zimbq,.zimbr,.zimbs,.zimbt,.zimbu,.zimbv,.zimbw,.zimbx,.zimby,.zimbz" /></p>   
                        <p><small><i class="text-info">Only Wikimedia (wiki*.zim*)</i> files have been tested. <i class="text-info">Audio, Video and Dynamic Content</i> is currently unsupported. To lookup old/submit new issues visit the <a target="_blank" href="http://github.com/kiwix/kiwix-js/issues">Kiwix-JS Issue Tracker</a></small></p>
                        <ul id="zims" style="padding:2px;"></ul>
                    </div>
                    <div id="scanningForArchives" style="display: none;">
                        <br /> Scanning for archives... Please wait <img src="img/spinner.gif" alt="Please wait..." />
                    </div>
                    <div id="chooseArchiveFromLocalStorage" style="display: none;">
                        <br /> Please select the archive you want to use : <select id="archiveList" class="form-control"></select>
                        <br /> Click <a id="btnRescanDeviceStorage">here</a> to rescan your SD Cards and internal memory
                    </div>
                    <!-- <h4>Display</h4>
                    <p>
                        <b>Style </b>
                         For Wikipedia Files: 
                            <label class"radio-inline" for="cssModeDesktopRadio">
                            <input type="radio"  name="cssInjectionMode" value="desktop" id="cssModeDesktopRadio" checked> Desktop
                        </label> 
                        <label class"radio-inline" for="cssModeMobileRadio">
                            <input type="radio" name="cssInjectionMode" value="mobile" id="cssModeMobileRadio"> Mobile
                        </label>  
                        <br/>
                        <b>Cache</b>
                        Use In-App Cached Styles: <label for="cssCacheModeCheck"><input type="checkbox" name="cssCacheMode" value="local" id="cssCacheModeCheck">
                        </label> 
                        <small> ( Recommended For Wikipedia ZIM )</small>
                    </p>
                    <h4>Expert Settings</h4>
                    <div id="contentInjectionModeDiv">
                        Content injection mode <small>(Don't touch unless you know what you're doing) </small>: <br/>
                        <input type="radio" name="contentInjectionMode" value="jquery" id="jQueryModeRadio" checked><label for="jQueryModeRadio">&nbsp; Document Parsing Based Injection</label> (slow and memory hungry, but safer)
                            <br>
                        <input type="radio" name="contentInjectionMode" value="serviceworker" id="serviceworkerModeRadio"><label for="serviceworkerModeRadio">&nbsp; Request Interception Based Injection</label> (faster but unstable, and not supported by all platforms. In particular, Firefox extensions do not allow ServiceWorkers for now)
                    </div> 
                    <div id="serviceWorkerStatus"></div>
                    <div id="messageChannelStatus"></div> -->
                </div> 

                <div id="welcomeText" class="container category-padding">
                    You can search the content of your ZIM archive by typing in the above search field.
                    <br />It will propose articles starting with what you typed
                </div>
                <!--<div id="articleContent" src="A/dummyArticle.html" class="articleIFrame">&nbsp;
                    <div id="body"></div>
				</div>-->
                <iframe id="articleContent" src="A/dummyArticle.html" style="width:100%;border:0;">&nbsp;</iframe>
			</article>
            <footer>
                <div id="navigationButtons" style="background:rgba(0,0,0,0.2);" class="navbar-fixed-bottom text-center">
                        <a class="btn btn-primary btn-sm pull-left" id="btnHomeBottom" title="Home"><span class="glyphicon glyphicon-home"></span></a>
                        <a class="btn btn-sm" id="btnBack" title="Back"><span class="glyphicon glyphicon-circle-arrow-left"></span></a><span id="appStatus"></span>
                        <a class="btn btn-sm" id="btnForward" title="Forward"><span class="glyphicon glyphicon-circle-arrow-right"></span></a>
                        <a class="btn btn-primary btn-sm pull-right" id="btnTop" title="Top" href="#top"><span class="glyphicon glyphicon-arrow-up"></span></a>
                </div>
            </footer>
        </section>

        <script type="text/javascript" src="js/lib/xzdec.js"></script>
        <!-- Using require.js, a module system for javascript, include the
             js files. This loads "main.js", which in turn can load other
             files, all handled by require.js:
             http://requirejs.org/docs/api.html#jsfiles -->
        <script type="text/javascript"
                data-main="js/init.js"
        src="js/lib/require.js"></script>
    </body>
</html>
